---
import Section from "@/layouts/Section.astro";
import { skills } from "@cv";

// Importar iconos
import HTML from "@/icons/html.astro";
import CSS from "@/icons/css.astro";
import JavaScript from "@/icons/javascript.astro";
import TypeScript from "@/icons/type.astro";
import Python from "@/icons/python.astro";
import React from "@/icons/react.astro";
import Next from "@/icons/next.astro";
import Django from "@/icons/django.astro";
import Tailwind from "@/icons/tailwind.astro";
import PostgreSQL from "@/icons/postgresql.astro";
import Git from "@/icons/git.astro";
import GitHub from "@/icons/GitHub.astro";
import TensorFlow from "@/icons/tensorflow.astro";
import ScikitLearn from "@/icons/scikit-learn.astro";
import Expo from "@/icons/expo.astro";
import AstroIcon from "@/icons/astro.astro";

const TECH_ICONS: Record<string, any> = {
  HTML: HTML,
  CSS: CSS,
  JavaScript: JavaScript,
  TypeScript: TypeScript,
  Python: Python,
  React: React,
  "Next.js": Next,
  "React Native": React,
  Django: Django,
  Expo: Expo,
  Tailwind: Tailwind,
  Astro: AstroIcon,
  PostgreSQL: PostgreSQL,
  Git: Git,
  GitHub: GitHub,
  Tensorflow: TensorFlow,
  "Scikit-learn": ScikitLearn,
};

const getLevelColor = (level: string) => {
  switch (level) {
    case "Master":
      return "bg-green-100 text-green-800 border-green-200";
    case "Avanzado":
      return "bg-blue-100 text-blue-800 border-blue-200";
    case "Intermedio":
      return "bg-yellow-100 text-yellow-800 border-yellow-200";
    default:
      return "bg-gray-100 text-gray-800 border-gray-200";
  }
};
---

<Section title="Habilidades TÃ©cnicas">
  <div class="space-y-8">
    {
      skills.map(({ name, technologies }) => (
        <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow duration-300">
          <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
            <div class="w-3 h-3 bg-primary-500 rounded-full" />
            {name}
          </h3>
          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3">
            {technologies.map(({ name: techName, level }) => {
              const Icon = TECH_ICONS[techName];
              return (
                <div
                  class={`flex items-center gap-2 px-3 py-2 rounded-lg border transition-all duration-300 hover:shadow-sm ${getLevelColor(level)}`}
                >
                  {Icon && <Icon />}
                  <span class="text-sm font-medium truncate" title={techName}>
                    {techName}
                  </span>
                </div>
              );
            })}
          </div>
        </div>
      ))
    }
  </div>

  <div
    class="mt-6 flex items-center justify-center gap-6 text-sm text-gray-600"
  >
    <div class="flex items-center gap-2">
      <div class="w-3 h-3 bg-green-500 rounded-full"></div>
      <span>Master</span>
    </div>
    <div class="flex items-center gap-2">
      <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
      <span>Avanzado</span>
    </div>
    <div class="flex items-center gap-2">
      <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
      <span>Intermedio</span>
    </div>
  </div>
</Section>
